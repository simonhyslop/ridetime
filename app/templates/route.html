{% extends 'base.html' %}

{% block content %}

    <ol class="breadcrumb">
        <li class="breadcrumb-item"><a href="{{ url_for('saved') }}">Saved Routes</a></li>
        <li class="breadcrumb-item active" aria-current="page">{{ route.title }}</li>
    </ol>

    <div class="container">
        <h1>
            {{ route.title|routetitle }}
            <button type="button" class="btn btn-secondary btn-sm" data-toggle="modal"
                    data-target="#editRoute">Edit
            </button>

            <button type="button" class="btn btn-primary float-right" data-toggle="tooltip" data-placement="top"
                    title="For use with Wahoo or Garmin bike GPS" onclick="getGPX()">Download GPX
            </button>
        </h1>

        <p><span class="badge badge-secondary" data-toggle="modal" data-target="#editRoute" id="visibilityDisplay"></span>
            Created {{ route.timestamp|timeago }}</p>

        <table class="table">
            {% include '_routedisplay.html' %}
        </table>
    </div>

    {% include '_mapbox.html' %}

    {% include '_editmodal.html' %}

    <script>
        $(function () {
            $('[data-toggle="tooltip"]').tooltip()
        })

        function getGPX() {
            window.location = '{{ url_for('download_gpx', route_id=route.id) }}';
        }
    </script>

{% endblock %}